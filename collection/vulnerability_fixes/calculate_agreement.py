import sys
from sklearn.metrics import cohen_kappa_score
import pandas as pd

sys.path.append('..')
from finder import *  # noqa: E402


def agreement(kappa_score):
    if kappa_score <= 0.20:
        return kappa_score, 'slight'
    elif kappa_score <= 0.40:
        return kappa_score, 'fair'
    elif kappa_score <= 0.60:
        return kappa_score, 'moderate'
    elif kappa_score <= 0.80:
        return kappa_score, 'substantial'
    elif kappa_score <= 1.00:
        return kappa_score, 'almost perfect'


if __name__ == "__main__":
    y1 = pd.read_csv(PATH_VULNERABILITY_FIXES['stage_2_second_rater_true'], index_col=False)['D'].to_list()
    y2 = pd.read_csv(PATH_VULNERABILITY_FIXES['stage_2_second_rater_2'], index_col=False)['D'].to_list()
    for i in range(len(y1)):
        if y1[i] != y2[i]:
            print(i)
            print(y1[i])
            print(y2[i])
    print(agreement(cohen_kappa_score(y1, y2, list(set(y1).union(y2)))))